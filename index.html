<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GDPVal Task Creator - Parsewave</title>
  <link rel="icon" href="favicon.svg" type="image/svg+xml">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&family=Outfit:wght@400;500;600;700;800;900&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script>
    // Configure API URL for this server (use relative URL)
    window.GDPVAL_API_URL = '';
  </script>
</head>
<body>
  <!-- Animated Background -->
  <div class="animated-bg">
    <div class="orb orb1"></div>
    <div class="orb orb2"></div>
    <div class="orb orb3"></div>
  </div>

  <main class="main-content">
    <!-- Hero Section -->
    <div class="hero">
      <div class="hero-badge">
        <span class="badge-icon">âš¡</span>
        <span>GDPVal Benchmark Suite</span>
      </div>
      <h1 class="hero-title">
        <span class="title-line">Task</span>
        <span class="title-line gradient">Creator</span>
      </h1>
      <p class="hero-subtitle">Design professional AI evaluation tasks with precision</p>
      <p class="hero-help-text">
        Need help? <button type="button" class="inline-help-link" id="viewExamplesBtn">View reference examples</button>
      </p>
    </div>

    <!-- Form Progress Bar -->
    <div class="form-progress">
      <div class="progress-header">
        <span class="progress-label">Form Progress</span>
        <span class="progress-percent" id="progressText">0%</span>
      </div>
      <div class="progress-track">
        <div class="progress-fill" id="progressFill"></div>
      </div>
    </div>

    <!-- Main Form -->
    <form id="taskForm" class="task-form">

      <!-- Section 1: Identity -->
      <section class="form-section">
        <div class="section-badge">
          <span class="badge-number">1</span>
          <span class="badge-label">Identity</span>
        </div>

        <div class="section-content">
          <div class="input-group">
            <label class="input-label" for="taskName">
              Task Name
              <button type="button" class="help-btn" data-tooltip="A unique identifier for your task. Use lowercase letters and hyphens only. Examples: 'financial-report-analysis', 'medical-diagnosis-review', 'contract-clause-extraction'">?</button>
            </label>
            <input
              type="text"
              id="taskName"
              class="text-input"
              placeholder="quarterly-earnings-analysis"
              required
            >
            <span class="input-hint">Lowercase, hyphens only (e.g., contract-review, patient-triage)</span>
          </div>

          <div class="input-row">
            <div class="input-group">
              <label class="input-label" for="sector">
                Sector
                <button type="button" class="help-btn" data-tooltip="The industry sector this task belongs to. Examples: 'Finance and Insurance', 'Health Care', 'Professional Services', 'Manufacturing'">?</button>
              </label>
              <div class="select-wrapper">
                <select id="sector" class="select-input" required>
                  <option value="">Choose sector...</option>
                </select>
                <svg class="select-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M6 9l6 6 6-6"/>
                </svg>
              </div>
            </div>

            <div class="input-group">
              <label class="input-label" for="occupation">
                Occupation
                <button type="button" class="help-btn" data-tooltip="The specific job role that would perform this task. Examples: 'Financial Analysts', 'Registered Nurses', 'Lawyers', 'Software Developers'">?</button>
              </label>
              <div class="select-wrapper">
                <select id="occupation" class="select-input" required disabled>
                  <option value="">Select sector first...</option>
                </select>
                <svg class="select-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M6 9l6 6 6-6"/>
                </svg>
              </div>
            </div>
          </div>

        </div>
      </section>

      <!-- Section 2: Description -->
      <section class="form-section">
        <div class="section-badge">
          <span class="badge-number">2</span>
          <span class="badge-label">Description</span>
        </div>

        <div class="section-content">
          <div class="input-group">
            <label class="input-label" for="instruction">
              Task Instruction
              <button type="button" class="help-btn" data-tooltip="Detailed description of what the AI should accomplish. Include: context, specific requirements, deliverables, and constraints. Should be clear enough for someone with domain expertise to understand exactly what's expected.">?</button>
            </label>
            <div class="textarea-wrapper">
              <textarea
                id="instruction"
                class="textarea-input"
                rows="10"
                placeholder="Describe what the AI should accomplish...

Example: You are a financial analyst tasked with analyzing Q3 earnings data. Using the provided spreadsheet, calculate year-over-year growth rates, identify trends, and create a summary report highlighting key insights for stakeholders."
                required
              ></textarea>
              <div class="textarea-footer">
                <span class="char-count"><span id="charCount">0</span> characters</span>
                <span class="char-min">50 min</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section 3: Files -->
      <section class="form-section">
        <div class="section-badge">
          <span class="badge-number">3</span>
          <span class="badge-label">Files</span>
        </div>

        <div class="section-content">
          <div class="upload-grid">
            <!-- Reference Files -->
            <div class="upload-card">
              <div class="upload-header">
                <span class="upload-icon">ğŸ“</span>
                <div>
                  <h3 class="upload-title">
                    Reference Data
                    <button type="button" class="help-btn" data-tooltip="Input files the AI will have access to. Examples: spreadsheets with raw data, documents to analyze, images to process. These are the 'inputs' to the task.">?</button>
                  </h3>
                  <p class="upload-desc">Files the AI will use</p>
                </div>
              </div>
              <div class="upload-zone" id="referenceZone">
                <input type="file" id="referenceInput" multiple accept=".pdf,.docx,.txt,.md,.csv,.json,.xlsx,.pptx,.png,.jpg,.jpeg,.gif,.mp4,.mov,.avi,.mp3,.wav,.ogg">
                <div class="upload-placeholder">
                  <svg class="upload-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M12 16V4m0 0L8 8m4-4l4 4"/>
                    <path d="M3 20h18"/>
                  </svg>
                  <span>Drop files or click to browse</span>
                </div>
              </div>
              <div class="file-list" id="referenceList"></div>
              <p class="upload-formats">PDF, DOCX, CSV, JSON, PNG, JPG, MP4, MP3, WAV</p>
            </div>

            <!-- Solution Files -->
            <div class="upload-card solution">
              <div class="upload-header">
                <span class="upload-icon">ğŸ”</span>
                <div>
                  <h3 class="upload-title">
                    Solution Files
                    <button type="button" class="help-btn" data-tooltip="The correct/expected outputs. The AI will NOT see these - they're used to evaluate the AI's work. Examples: completed analysis, correct answers, expected reports.">?</button>
                  </h3>
                  <p class="upload-desc">Protected from AI access</p>
                </div>
                <span class="required-badge">Required</span>
              </div>
              <div class="upload-zone solution-zone" id="solutionZone">
                <input type="file" id="solutionInput" multiple>
                <div class="upload-placeholder">
                  <svg class="upload-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M12 16V4m0 0L8 8m4-4l4 4"/>
                    <path d="M3 20h18"/>
                  </svg>
                  <span>Drop files or click to browse</span>
                </div>
              </div>
              <div class="file-list" id="solutionList"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section 4: Rubric -->
      <section class="form-section">
        <div class="section-badge">
          <span class="badge-number">4</span>
          <span class="badge-label">Rubric</span>
        </div>

        <div class="section-content">
          <p class="rubric-intro">
            Define evaluation criteria. Minimum 3 categories required.
            <button type="button" class="help-btn" data-tooltip="Rubrics define how the AI's work will be scored. Each category should have clear criteria and point values. Example: 'Data Accuracy (25 pts): All calculations must be correct within 1% tolerance'">?</button>
          </p>

          <div class="rubric-container" id="rubricContainer">
            <!-- Rubric items will be added here -->
          </div>

          <button type="button" class="add-rubric-btn" id="addRubricBtn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 5v14M5 12h14"/>
            </svg>
            Add Category
          </button>

          <div class="rubric-total">
            Total: <span id="rubricTotal">0</span> points
          </div>
        </div>
      </section>

      <!-- Section 5: Sources (Optional) -->
      <section class="form-section">
        <div class="section-badge">
          <span class="badge-number">5</span>
          <span class="badge-label">Sources</span>
          <span class="badge-optional">(Optional)</span>
        </div>

        <div class="section-content">
          <p class="sources-intro">
            If you used any public domain data, add the source information here.
            <button type="button" class="help-btn" data-tooltip="Only required if you used publicly available datasets. Include the source name, URL, license information, and which of your uploaded files are derived from this source.">?</button>
          </p>

          <div class="sources-container" id="sourcesContainer">
            <!-- Source items will be added here dynamically -->
          </div>

          <button type="button" class="add-source-btn" id="addSourceBtn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 5v14M5 12h14"/>
            </svg>
            Add Source
          </button>
        </div>
      </section>

      <!-- Submit Actions -->
      <div class="form-actions">
        <button type="button" class="btn btn-secondary btn-wide" id="previewBtn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
            <circle cx="12" cy="12" r="3"/>
          </svg>
          Preview Task
        </button>
        <button type="submit" class="btn btn-primary btn-wide" id="submitBtn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
          </svg>
          Generate Task
        </button>
      </div>
    </form>
  </main>

  <!-- Preview Modal -->
  <div class="modal" id="previewModal">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>ğŸ“¦ Task Preview</h2>
        <button class="modal-close" id="closePreview">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="preview-tabs">
          <button class="tab-btn active" data-tab="yaml">task.yaml</button>
          <button class="tab-btn" data-tab="solution">solution.sh</button>
          <button class="tab-btn" data-tab="structure">Structure</button>
        </div>
        <div class="preview-content">
          <pre class="code-preview" id="yamlPreview"></pre>
          <pre class="code-preview hidden" id="solutionPreview"></pre>
          <div class="structure-preview hidden" id="structurePreview"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-success" id="downloadBtn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/>
          </svg>
          Download ZIP
        </button>
      </div>
    </div>
  </div>

  <!-- Success Modal -->
  <div class="modal" id="successModal">
    <div class="modal-backdrop"></div>
    <div class="modal-content success-modal">
      <div class="success-checkmark">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20 6L9 17l-5-5"/>
        </svg>
      </div>
      <h2>Task Created!</h2>
      <div class="success-task-id">
        <span class="task-id-label">Task ID</span>
        <code id="successTaskId"></code>
      </div>
      <p id="dbStatus" class="db-status"></p>
      <button class="btn btn-primary" id="closeSuccessModal">Done</button>
    </div>
  </div>

  <!-- Toast Notifications -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Reference Examples Modal -->
  <div class="modal-overlay" id="examplesModal">
    <div class="terminal-modal">
      <div class="terminal-header">
        <div class="terminal-dots">
          <span class="dot red"></span>
          <span class="dot yellow"></span>
          <span class="dot green"></span>
        </div>
        <span class="terminal-title">reference-examples</span>
        <button class="terminal-close" id="closeExamplesModal">&times;</button>
      </div>
      <div class="terminal-body">
        <div class="terminal-sidebar">
          <div class="file-tree">
            <div class="tree-item folder open" data-path="samples">
              <span class="tree-icon">ğŸ“</span>
              <span class="tree-name">samples/</span>
            </div>
            <div class="tree-item file" data-path="1-task-description/SAMPLE-TASK.txt" data-folder="1-task-description">
              <span class="tree-icon">ğŸ“„</span>
              <span class="tree-name">1-task-description/</span>
            </div>
            <div class="tree-item file" data-path="2-reference-files/README.txt" data-folder="2-reference-files">
              <span class="tree-icon">ğŸ“</span>
              <span class="tree-name">2-reference-files/</span>
            </div>
            <div class="tree-item file" data-path="3-solution-files/README.txt" data-folder="3-solution-files">
              <span class="tree-icon">ğŸ”</span>
              <span class="tree-name">3-solution-files/</span>
            </div>
            <div class="tree-item file" data-path="4-rubrics/SAMPLE-RUBRICS.txt" data-folder="4-rubrics">
              <span class="tree-icon">ğŸ“‹</span>
              <span class="tree-name">4-rubrics/</span>
            </div>
          </div>
        </div>
        <div class="terminal-content">
          <div class="file-viewer" id="fileViewer">
            <div class="file-header">
              <span class="file-path" id="currentFilePath">Select a folder to view its contents</span>
            </div>
            <pre class="file-content" id="fileContent">
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                            â•‘
â•‘   ğŸ‘‹ Welcome to GDPVal Reference Examples                  â•‘
â•‘                                                            â•‘
â•‘   Click on a folder in the sidebar to view sample          â•‘
â•‘   files showing what to upload for each section.           â•‘
â•‘                                                            â•‘
â•‘   ğŸ“ 1-task-description/ - How to write task details       â•‘
â•‘   ğŸ“ 2-reference-files/  - Input files for the AI          â•‘
â•‘   ğŸ” 3-solution-files/   - Correct answers (hidden from AI)â•‘
â•‘   ğŸ“‹ 4-rubrics/          - Scoring criteria                â•‘
â•‘                                                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            </pre>
          </div>
        </div>
      </div>
      <div class="terminal-footer">
        <a href="reference-examples.zip" download class="terminal-btn download">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7 10 12 15 17 10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          Download ZIP
        </a>
        <button class="terminal-btn close" id="closeExamplesBtn">Close</button>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
