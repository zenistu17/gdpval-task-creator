<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GDPVal Task Creator</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&family=Outfit:wght@400;500;600;700;800;900&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Animated Background -->
  <div class="animated-bg">
    <div class="orb orb1"></div>
    <div class="orb orb2"></div>
    <div class="orb orb3"></div>
  </div>

  <main class="main-content">
    <!-- Hero Section -->
    <div class="hero">
      <div class="hero-badge">
        <span class="badge-icon">‚ö°</span>
        <span>GDPVal Benchmark Suite</span>
      </div>
      <h1 class="hero-title">
        <span class="title-line">Task</span>
        <span class="title-line gradient">Creator</span>
      </h1>
      <p class="hero-subtitle">Design professional AI evaluation tasks with precision</p>
      <a href="reference-examples.zip" download class="reference-btn">
        <svg class="ref-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="7 10 12 15 17 10"/>
          <line x1="12" y1="15" x2="12" y2="3"/>
        </svg>
        <span>Download Reference Examples</span>
      </a>
    </div>

    <!-- Form Progress Bar -->
    <div class="form-progress">
      <div class="progress-header">
        <span class="progress-label">Form Progress</span>
        <span class="progress-percent" id="progressText">0%</span>
      </div>
      <div class="progress-track">
        <div class="progress-fill" id="progressFill"></div>
      </div>
    </div>

    <!-- Main Form -->
    <form id="taskForm" class="task-form">

      <!-- Section 1: Identity -->
      <section class="form-section">
        <div class="section-badge">
          <span class="badge-number">1</span>
          <span class="badge-label">Identity</span>
        </div>

        <div class="section-content">
          <div class="input-group">
            <label class="input-label" for="taskName">Task Name</label>
            <input
              type="text"
              id="taskName"
              class="text-input"
              placeholder="quarterly-earnings-analysis"
              required
            >
            <span class="input-hint">Lowercase, hyphens only (e.g., contract-review, patient-triage)</span>
          </div>

          <div class="input-row">
            <div class="input-group">
              <label class="input-label" for="sector">Sector</label>
              <div class="select-wrapper">
                <select id="sector" class="select-input" required>
                  <option value="">Choose sector...</option>
                </select>
                <svg class="select-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M6 9l6 6 6-6"/>
                </svg>
              </div>
            </div>

            <div class="input-group">
              <label class="input-label" for="occupation">Occupation</label>
              <div class="select-wrapper">
                <select id="occupation" class="select-input" required disabled>
                  <option value="">Select sector first...</option>
                </select>
                <svg class="select-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M6 9l6 6 6-6"/>
                </svg>
              </div>
            </div>
          </div>

          <div class="input-group">
            <label class="input-label">Difficulty</label>
            <div class="difficulty-toggle">
              <input type="radio" name="difficulty" id="diffEasy" value="easy">
              <label for="diffEasy" class="difficulty-option" data-level="easy">
                <span class="diff-dot"></span>
                Easy
              </label>
              <input type="radio" name="difficulty" id="diffMedium" value="medium" checked>
              <label for="diffMedium" class="difficulty-option" data-level="medium">
                <span class="diff-dot"></span>
                Medium
              </label>
              <input type="radio" name="difficulty" id="diffHard" value="hard">
              <label for="diffHard" class="difficulty-option" data-level="hard">
                <span class="diff-dot"></span>
                Hard
              </label>
            </div>
          </div>
        </div>
      </section>

      <!-- Section 2: Description -->
      <section class="form-section">
        <div class="section-badge">
          <span class="badge-number">2</span>
          <span class="badge-label">Description</span>
        </div>

        <div class="section-content">
          <div class="input-group">
            <label class="input-label" for="instruction">Task Instruction</label>
            <div class="textarea-wrapper">
              <textarea
                id="instruction"
                class="textarea-input"
                rows="10"
                placeholder="Describe what the AI should accomplish...

Example: You are a financial analyst tasked with analyzing Q3 earnings data. Using the provided spreadsheet, calculate year-over-year growth rates, identify trends, and create a summary report highlighting key insights for stakeholders."
                required
              ></textarea>
              <div class="textarea-footer">
                <span class="char-count"><span id="charCount">0</span> characters</span>
                <span class="char-min">50 min</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section 3: Files -->
      <section class="form-section">
        <div class="section-badge">
          <span class="badge-number">3</span>
          <span class="badge-label">Files</span>
        </div>

        <div class="section-content">
          <div class="upload-grid">
            <!-- Reference Files -->
            <div class="upload-card">
              <div class="upload-header">
                <span class="upload-icon">üìÅ</span>
                <div>
                  <h3 class="upload-title">Reference Data</h3>
                  <p class="upload-desc">Files the AI will use</p>
                </div>
              </div>
              <div class="upload-zone" id="referenceZone">
                <input type="file" id="referenceInput" multiple accept=".pdf,.docx,.txt,.md,.csv,.json,.xlsx,.pptx,.png,.jpg,.jpeg,.gif,.mp4,.mov,.avi,.mp3,.wav,.ogg">
                <div class="upload-placeholder">
                  <svg class="upload-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M12 16V4m0 0L8 8m4-4l4 4"/>
                    <path d="M3 20h18"/>
                  </svg>
                  <span>Drop files or click to browse</span>
                </div>
              </div>
              <div class="file-list" id="referenceList"></div>
              <p class="upload-formats">PDF, DOCX, CSV, JSON, PNG, JPG, MP4, MP3, WAV</p>
            </div>

            <!-- Solution Files -->
            <div class="upload-card solution">
              <div class="upload-header">
                <span class="upload-icon">üîê</span>
                <div>
                  <h3 class="upload-title">Solution Files</h3>
                  <p class="upload-desc">Protected from AI access</p>
                </div>
                <span class="required-badge">Required</span>
              </div>
              <div class="upload-zone solution-zone" id="solutionZone">
                <input type="file" id="solutionInput" multiple>
                <div class="upload-placeholder">
                  <svg class="upload-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M12 16V4m0 0L8 8m4-4l4 4"/>
                    <path d="M3 20h18"/>
                  </svg>
                  <span>Drop files or click to browse</span>
                </div>
              </div>
              <div class="file-list" id="solutionList"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section 4: Time -->
      <section class="form-section">
        <div class="section-badge">
          <span class="badge-number">4</span>
          <span class="badge-label">Time</span>
        </div>

        <div class="section-content">
          <div class="time-notice">
            <svg class="notice-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <path d="M12 6v6l4 2"/>
            </svg>
            <div>
              <strong>Minimum 7 hours for experts</strong>
              <p>Tasks must be complex enough to require significant time investment.</p>
            </div>
          </div>

          <div class="time-inputs">
            <div class="time-input-group">
              <label class="input-label" for="expertTime">
                <span class="time-icon">üéØ</span>
                Expert Time
              </label>
              <div class="time-input-wrapper">
                <input type="number" id="expertTime" class="time-input" min="7" max="40" step="0.5" value="7" required>
                <span class="time-suffix">hours</span>
              </div>
              <span class="input-hint">10+ years experience</span>
            </div>

            <div class="time-input-group">
              <label class="input-label" for="juniorTime">
                <span class="time-icon">üìö</span>
                Junior Time
              </label>
              <div class="time-input-wrapper">
                <input type="number" id="juniorTime" class="time-input" min="7" max="40" step="0.5" value="10" required>
                <span class="time-suffix">hours</span>
              </div>
              <span class="input-hint">1-2 years experience</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Section 5: Rubric -->
      <section class="form-section">
        <div class="section-badge">
          <span class="badge-number">5</span>
          <span class="badge-label">Rubric</span>
        </div>

        <div class="section-content">
          <p class="rubric-intro">Define evaluation criteria. Minimum 3 categories required.</p>

          <div class="rubric-container" id="rubricContainer">
            <!-- Rubric items will be added here -->
          </div>

          <button type="button" class="add-rubric-btn" id="addRubricBtn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 5v14M5 12h14"/>
            </svg>
            Add Category
          </button>

          <div class="rubric-total">
            Total: <span id="rubricTotal">0</span> points
          </div>
        </div>
      </section>

      <!-- Submit Actions -->
      <div class="form-actions">
        <button type="button" class="btn btn-secondary btn-wide" id="previewBtn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
            <circle cx="12" cy="12" r="3"/>
          </svg>
          Preview Task
        </button>
        <button type="submit" class="btn btn-primary btn-wide" id="submitBtn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
          </svg>
          Generate Task
        </button>
      </div>
    </form>
  </main>

  <!-- Preview Modal -->
  <div class="modal" id="previewModal">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>üì¶ Task Preview</h2>
        <button class="modal-close" id="closePreview">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="preview-tabs">
          <button class="tab-btn active" data-tab="yaml">task.yaml</button>
          <button class="tab-btn" data-tab="solution">solution.sh</button>
          <button class="tab-btn" data-tab="structure">Structure</button>
        </div>
        <div class="preview-content">
          <pre class="code-preview" id="yamlPreview"></pre>
          <pre class="code-preview hidden" id="solutionPreview"></pre>
          <div class="structure-preview hidden" id="structurePreview"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-success" id="downloadBtn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/>
          </svg>
          Download ZIP
        </button>
      </div>
    </div>
  </div>

  <!-- Success Modal -->
  <div class="modal" id="successModal">
    <div class="modal-backdrop"></div>
    <div class="modal-content success-modal">
      <div class="success-checkmark">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20 6L9 17l-5-5"/>
        </svg>
      </div>
      <h2>Task Created!</h2>
      <div class="success-task-id">
        <span class="task-id-label">Task ID</span>
        <code id="successTaskId"></code>
      </div>
      <p id="dbStatus" class="db-status"></p>
      <button class="btn btn-primary" id="closeSuccessModal">Done</button>
    </div>
  </div>

  <!-- Toast Notifications -->
  <div class="toast-container" id="toastContainer"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
